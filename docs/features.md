##### 智能媒体转码系统 - 功能介绍

基于GPU加速的FFmpeg视频转码处理器，支持队列管理和任务监测。

## 核心功能

### AI 智能转码参数生成

- 使用 AWS Bedrock Claude Sonnet 4 自动生成 FFmpeg 参数
- 用户只需用自然语言描述需求，如"帮我把视频转成720p"
- 支持测试生成的参数，验证通过后可保存为预设

### 跨平台硬件加速

- **macOS (Apple Silicon)**: 使用 VideoToolbox 硬件加速
- **Linux (NVIDIA GPU)**: 使用 NVENC 硬件加速
- **其他平台**: 自动回退到 CPU 软件编码

### 自定义转码预设

- 保存 AI 生成的参数为可复用的预设
- 支持预设的导入/导出
- 内置预设与自定义预设分离管理

### 任务触发方式

系统支持两种任务触发方式：

1. **自动触发（S3事件通知）**: 上传视频到 S3 输入桶时自动触发转码，使用默认转码类型
2. **手动触发（API调用）**: 通过 REST API 添加任务，可指定自定义转码类型

## 支持的转码格式

### 内置预设

| 预设名称                | 说明              |
| ----------------------- | ----------------- |
| `mp4_standard`        | 标清MP4 (848x480) |
| `mp4_smooth`          | 流畅MP4 (640x360) |
| `hdlbr_h265`          | 高质量H265        |
| `lcd_h265`            | LCD优化H265       |
| `h265_mute`           | 静音H265          |
| `custom_mute_preview` | 静音预览          |
| `thumbnail`           | 缩略图JPG         |

### AI 生成自定义预设

通过 Web 界面的 "AI智能转码" 功能，可以用自然语言描述需求生成新的转码预设：

- "帮我把视频转成720p分辨率"
- "生成一个适合手机播放的低码率版本"
- "提取视频的音频轨道为MP3格式"

## Web 管理界面

系统提供了一个易于使用的图形化 Web 管理界面，无需记忆 API 命令即可管理队列和任务。

### 访问方式

启动 API 服务器后，打开浏览器访问：

```
http://your-server:9999/admin
```

### 功能特性

| 功能模块    | 说明                                                             |
| ----------- | ---------------------------------------------------------------- |
| 📊 仪表盘   | 实时显示队列状态、今日完成/失败统计、最近任务列表                |
| 📋 任务管理 | 任务列表查看、状态筛选、日期筛选、分页浏览、任务详情、重试、取消 |
| 📬 队列管理 | 查看队列等待/处理中消息数量、一键清空队列                        |
| ➕ 添加任务 | 图形化添加转码任务，可选择多种转码类型                           |

### 界面说明

- **仪表盘**: 首页展示系统整体状态，包括队列消息数、今日处理统计、最近任务快速预览
- **任务管理**: 支持按状态（等待中/处理中/已完成/失败等）和日期筛选任务，点击任务可查看详细信息
- **队列管理**: 显示 SQS 队列的实时状态，支持清空队列操作
- **添加任务**: 填写 S3 桶名和文件路径，勾选需要的转码类型即可提交任务

## 系统要求

### GPU服务器要求

- NVIDIA GPU (支持CUDA)
- Ubuntu 20.04+ 或类似Linux发行版
- 已安装NVIDIA驱动和CUDA工具包
- 已安装FFmpeg (支持GPU加速)
- Go 1.19+ 运行环境

### API服务器要求

- Go 1.19+ 运行环境
- 网络访问AWS服务

### AWS资源要求

- AWS账户和适当的IAM权限
- 已创建的S3存储桶
- 已配置的SQS队列
- 已创建的DynamoDB表
